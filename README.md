# atmega-breakout-PCB
This PCB project is meant to replicate a simple atmega32u4 microcontroller board with GPIO pinouts. It contains a USB port for programming and powering.

As the idea of designing my own PCB always fascinated me, I thought it would be interesting to give designing one a shot!

While searching around the market for which MCU to use, I choose the ATMEGA32u4 as it comes with a pre-installed bootloader, allowing you to program it via the USB right from the start.
This MCU also came with USB support, something I wanted in my PCB. It was quite the learning process. I feel like I learned quite a bit that I want to share.

![image](https://user-images.githubusercontent.com/75451857/181871264-cc567129-c8c9-423a-ae4a-b7c5cdc2666f.png)

To begin with, you typically start by setting up the main components the MCU needs to function: it's power and crystal oscillator.

When designing the schematic for the VCC pins, it is best practice to place a 100nF decoupling capacitor for each pin along with a 10uF bulk decoupling capcitor to help with the stabilization of the input voltage.

![image](https://user-images.githubusercontent.com/75451857/181871890-8593983c-c843-45ff-a511-f837e8bc1700.png)

For the crystal oscillator, you'll want to calculate the value of the decoupling capacitors associated with it. While it is standard practice to use 22pF capacitors, it is important to choose proper capacitor values to allow for more accurate and stable results from the crystal.

  - The capacitor values can be calculated from a formula like this:
    - C1, C2 = 2*Cload-2*Cstray

  - Cload, or the load capacitance, is retrieved from the datasheet of the specific crystal you choose.
  - Cstray, or the stray capacitance, is typically between a value of 3-5pF.
    - Cstray is the parasitic capacitance formed between two traces separated by a dielectric (in more layman terms, it is caused by a potential difference generated by current carrying traces running in close proximity to one another)

![image](https://user-images.githubusercontent.com/75451857/182009583-13f33806-3cf5-461c-9fa8-a2764660df8d.png)

If you ever find yourself lost, the MCU datasheet typically has a lot of guidelines for when it comes to designing with that specific IC. Make sure to follow them.

I placed a GND plane on the entire bottom layer of my PCB. This allows for better signal integrity and more resistance to interference, it also allows you to create a via to ground wherever you need it.
     
  - Using one via per GND pin reduces the issue of potentially creating a ground loop and minimizes noise.

I discovered that USBs are typically designed with something known as "differential pairs"

  - On the schematic below, you can see D+ and D-, the postive and negative sign typically denote differential pairings
  - Differential pair PCB routing is used to create a balanced transmission system able to carry equal and opposite signals.
      - These two lines are usually of equal length
  - Having differential pairs also reduces any unwanted impedence

![image](https://user-images.githubusercontent.com/75451857/181872039-e1b47c70-9be7-494d-a3d3-bd0ea997f8ab.png)

If you have any advice for me or would like to talk to me about certain design decisions feel free to give me a message! I am always looking to learn new things and improve my knowledge

# Full Schematic
![image](https://user-images.githubusercontent.com/75451857/185668366-d9b2fad1-16e1-4ced-8fe0-f487eae26e6f.png)

